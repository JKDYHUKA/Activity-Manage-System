{"ast":null,"code":"export default {\n  name: 'login-register',\n  data() {\n    return {\n      isLogin: true,\n      emailError: false,\n      passwordError: false,\n      existed: false,\n      form: {\n        username: '',\n        useremail: '',\n        userpwd: '',\n        phone_number: '',\n        input_captcha: ''\n      },\n      received_captcha: ''\n    };\n  },\n  methods: {\n    changeType() {\n      this.isLogin = !this.isLogin;\n      this.form.username = '';\n      this.form.useremail = '';\n      this.form.userpwd = '';\n      this.form.input_captcha = '';\n      this.form.phone_number = '';\n    },\n    login() {\n      const self = this;\n      if (self.form.username != \"\" && self.form.userpwd != \"\") {\n        fetch('http://127.0.0.1:8000/api/login/', {\n          method: 'POST',\n          header: {\n            'Content-Type': 'application/json'\n          },\n          body: JSON.stringify({\n            username: self.form.username,\n            password: self.form.userpwd\n          })\n        }).then(res => {\n          return res.json();\n        }).then(data => {\n          if (data.login_code === '0') {\n            alert(\"登录成功\");\n          } else {\n            alert(\"用户名或者密码错误\");\n          }\n        }).catch(err => {\n          console.log(err);\n        });\n      } else {\n        alert(\"填写不能为空！\");\n      }\n    },\n    register() {\n      if (this.received_captcha === this.form.input_captcha) {\n        fetch('http://127.0.0.1:8000/api/submit_register_form/', {\n          method: 'POST',\n          headers: {\n            'Content-Type': 'application/json'\n          },\n          body: JSON.stringify({\n            username: this.form.username,\n            email: this.form.useremail,\n            password: this.form.userpwd,\n            phone_number: this.form.phone_number\n          })\n        }).then(response => {\n          return response.json();\n        }).then(data => {\n          alert(data.message);\n        }).catch(error => {\n          console.error(error);\n        });\n      } else {\n        alert(\"验证码不对\");\n      }\n    },\n    getCaptcha() {\n      fetch('http://127.0.0.1:8000/api/get_captcha/', {\n        method: 'POST',\n        headers: {\n          'Content-Type': 'application/json'\n        },\n        body: JSON.stringify({\n          phone_number: this.form.phone_number\n        })\n      }).then(response => {\n        return response.json();\n      }).then(data => {\n        this.received_captcha = data.code;\n      }).catch(error => {\n        console.error(\"发送验证码出错\", error);\n      });\n    }\n  }\n};","map":{"version":3,"names":["name","data","isLogin","emailError","passwordError","existed","form","username","useremail","userpwd","phone_number","input_captcha","received_captcha","methods","changeType","login","self","fetch","method","header","body","JSON","stringify","password","then","res","json","login_code","alert","catch","err","console","log","register","headers","email","response","message","error","getCaptcha","code"],"sources":["E:\\VueProject\\Vue_Frontend\\src\\components\\register.vue"],"sourcesContent":["<template>\r\n\t<div class=\"login-register\">\r\n\t\t<div class=\"contain\">\r\n\t\t\t<div class=\"big-box\" :class=\"{active:isLogin}\">\r\n\t\t\t\t<div class=\"big-contain\" key=\"bigContainLogin\" v-if=\"isLogin\">\r\n\t\t\t\t\t<div class=\"btitle\">账户登录</div>\r\n\t\t\t\t\t<div class=\"bform\">\r\n\t\t\t\t\t\t<input type=\"email\" placeholder=\"用户名\" v-model=\"form.username\">\r\n\t\t\t\t\t\t<span class=\"errTips\" v-if=\"emailError\">* 邮箱填写错误 *</span>\r\n\t\t\t\t\t\t<input type=\"password\" placeholder=\"密码\" v-model=\"form.userpwd\">\r\n\t\t\t\t\t\t<span class=\"errTips\" v-if=\"emailError\">* 密码填写错误 *</span>\r\n\t\t\t\t\t</div>\r\n\t\t\t\t\t<button class=\"bbutton\" @click=\"login\">登录</button>\r\n\t\t\t\t\t<button class=\"upward-shift\" v-if=\"isLogin\">找回密码</button>\r\n\t\t\t\t</div>\r\n\t\t\t\t<div class=\"big-contain\" key=\"bigContainRegister\" v-else>\r\n\t\t\t\t\t<div class=\"btitle\">创建账户</div>\r\n\t\t\t\t\t<div class=\"bform\">\r\n\t\t\t\t\t\t<input type=\"text\" placeholder=\"用户名\" v-model=\"form.username\">\r\n\t\t\t\t\t\t<span class=\"errTips\" v-if=\"existed\">* 用户名已经存在！ *</span>\r\n\t\t\t\t\t\t<input type=\"email\" placeholder=\"邮箱\" v-model=\"form.useremail\">\r\n\t\t\t\t\t\t<input type=\"password\" placeholder=\"密码\" v-model=\"form.userpwd\">\r\n                        <input type=\"phone_number\" placeholder=\"手机号\" v-model=\"form.phone_number\">\r\n                        <div class=\"captcha_zone\">\r\n                            <div class=\"captcha_button\" @click=\"getCaptcha\">发送验证码</div>\r\n                            <input type=\"text\" v-model=\"form.input_captcha\" class=\"captcha_input\">\r\n                        </div>\r\n\t\t\t\t\t</div>\r\n\t\t\t\t\t<button class=\"bbutton\" @click=\"register\">注册</button>\r\n\t\t\t\t</div>\r\n\t\t\t</div>\r\n\t\t\t<div class=\"small-box\" :class=\"{active:isLogin}\">\r\n\t\t\t\t<div class=\"small-contain\" key=\"smallContainRegister\" v-if=\"isLogin\">\r\n\t\t\t\t\t<div class=\"stitle\">你好，朋友!</div>\r\n\t\t\t\t\t<p class=\"scontent\">开始注册，和我们一起旅行</p>\r\n\t\t\t\t\t<button class=\"sbutton\" @click=\"changeType\">注册</button>\r\n\t\t\t\t</div>\r\n\t\t\t\t<div class=\"small-contain\" key=\"smallContainLogin\" v-else>\r\n\t\t\t\t\t<div class=\"stitle\">欢迎回来!</div>\r\n\t\t\t\t\t<p class=\"scontent\">请登录你的账户</p>\r\n\t\t\t\t\t<button class=\"sbutton\" @click=\"changeType\">登录</button>\r\n\t\t\t\t</div>\r\n\t\t\t</div>\r\n\t\t</div>\r\n\t</div>\r\n</template>\r\n\r\n<script>\r\n\texport default{\r\n\t\tname:'login-register',\r\n\t\tdata(){\r\n\t\t\treturn {\r\n\t\t\t\tisLogin:true,\r\n\t\t\t\temailError: false,\r\n\t\t\t\tpasswordError: false,\r\n\t\t\t\texisted: false,\r\n\t\t\t\tform:{\r\n\t\t\t\t\tusername:'',\r\n\t\t\t\t\tuseremail:'',\r\n\t\t\t\t\tuserpwd:'',\r\n                    phone_number:'',\r\n                    input_captcha: '',\r\n\t\t\t\t},\r\n                received_captcha:''\r\n\t\t\t}\r\n\t\t},\r\n\t\tmethods:{\r\n\t\t\tchangeType() {\r\n\t\t\t\tthis.isLogin = !this.isLogin\r\n\t\t\t\tthis.form.username = ''\r\n\t\t\t\tthis.form.useremail = ''\r\n\t\t\t\tthis.form.userpwd = ''\r\n\t\t\t\tthis.form.input_captcha = ''\r\n\t\t\t\tthis.form.phone_number = ''\r\n\t\t\t},\r\n\t\t\tlogin() {\r\n\t\t\t\tconst self = this;\r\n\t\t\t\tif (self.form.username != \"\" && self.form.userpwd != \"\") {\r\n\t\t\t\t\tfetch('http://127.0.0.1:8000/api/login/', {\r\n\t\t\t\t\t\tmethod: 'POST',\r\n\t\t\t\t\t\theader: {\r\n                            'Content-Type': 'application/json'\r\n                        },\r\n\t\t\t\t\t\tbody: JSON.stringify({\r\n\t\t\t\t\t\t\tusername: self.form.username,\r\n\t\t\t\t\t\t\tpassword: self.form.userpwd,\r\n\t\t\t\t\t\t})\r\n\t\t\t\t\t})\r\n\t\t\t\t\t.then( res => {\r\n\t\t\t\t\t\treturn res.json()\r\n\t\t\t\t\t}\r\n\t\t\t\t\t)\r\n\t\t\t\t\t.then(data => {\r\n\t\t\t\t\t\tif (data.login_code === '0'){\r\n\t\t\t\t\t\t\talert(\"登录成功\")\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\telse{\r\n\t\t\t\t\t\t\talert(\"用户名或者密码错误\")\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t})\r\n\t\t\t\t\t.catch( err => {\r\n\t\t\t\t\t\tconsole.log(err);\r\n\t\t\t\t\t})\r\n\t\t\t\t} else{\r\n\t\t\t\t\talert(\"填写不能为空！\");\r\n\t\t\t\t}\r\n\t\t\t},\r\n\t\t\tregister(){\r\n                if (this.received_captcha === this.form.input_captcha){\r\n                    fetch('http://127.0.0.1:8000/api/submit_register_form/', {\r\n                        method: 'POST',\r\n                        headers: {\r\n                            'Content-Type': 'application/json'\r\n                        },\r\n                        body: JSON.stringify({\r\n                            username: this.form.username,\r\n                            email: this.form.useremail,\r\n                            password: this.form.userpwd,\r\n                            phone_number: this.form.phone_number,\r\n                        })\r\n                    })\r\n                    .then(response => {\r\n                        return response.json()\r\n                    })\r\n                    .then(data => {\r\n                        alert(data.message)\r\n                    })\r\n                    .catch(error => {\r\n                        console.error(error)\r\n                    })\r\n                }\r\n                else {\r\n                    alert(\"验证码不对\")\r\n                }\r\n\t\t\t\t\r\n\t\t\t},\r\n            getCaptcha(){\r\n                fetch('http://127.0.0.1:8000/api/get_captcha/', {\r\n                    method:'POST',\r\n                    headers: {\r\n                        'Content-Type': 'application/json'\r\n                    },\r\n                    body: JSON.stringify({\r\n                        phone_number: this.form.phone_number\r\n                    })\r\n                })\r\n                .then(response => {\r\n                    return response.json()\r\n                })\r\n                .then(data => {\r\n                    this.received_captcha = data.code\r\n                })\r\n                .catch(error => {\r\n                    console.error(\"发送验证码出错\", error)\r\n                });\r\n            },\r\n\t\t}\r\n\t}\r\n</script>\r\n\r\n<style scoped=\"scoped\">\r\n\t.upward-shift {\r\n\t\tposition: relative;\r\n\t\ttop: 100px;\r\n\t\tleft:20px;\r\n\t\ttransform: translate(0, -100px);\r\n\t}\r\n\t.login-register{\r\n\t\twidth: 100vw;\r\n\t\theight: 100vh;\r\n\t\tbox-sizing: border-box;\r\n\t}\r\n\t.contain{\r\n\t\twidth: 60%;\r\n\t\theight: 60%;\r\n\t\tposition: relative;\r\n\t\ttop: 50%;\r\n\t\tleft: 50%;\r\n\t\ttransform: translate(-50%,-50%);\r\n\t\tbackground-color: #fff;\r\n\t\tborder-radius: 20px;\r\n\t\tbox-shadow: 0 0 3px #f0f0f0,\r\n\t\t\t\t\t0 0 6px #f0f0f0;\r\n\t}\r\n\t.big-box{\r\n\t\twidth: 70%;\r\n\t\theight: 100%;\r\n\t\tposition: absolute;\r\n\t\ttop: 0;\r\n\t\tleft: 30%;\r\n\t\ttransform: translateX(0%);\r\n\t\ttransition: all 1s;\r\n\t}\r\n\t.big-contain{\r\n\t\twidth: 100%;\r\n\t\theight: 100%;\r\n\t\tdisplay: flex;\r\n\t\tflex-direction: column;\r\n\t\tjustify-content: center;\r\n\t\talign-items: center;\r\n\t}\r\n\t.btitle{\r\n\t\tfont-size: 1.5em;\r\n\t\tfont-weight: bold;\r\n\t\tcolor: rgb(57,167,176);\r\n\t}\r\n\t.bform{\r\n\t\twidth: 100%;\r\n\t\theight: 40%;\r\n\t\tpadding: 2em 0;\r\n\t\tdisplay: flex;\r\n\t\tflex-direction: column;\r\n\t\tjustify-content: space-around;\r\n\t\talign-items: center;\r\n\t}\r\n\t.bform .errTips{\r\n\t\tdisplay: block;\r\n\t\twidth: 50%;\r\n\t\ttext-align: left;\r\n\t\tcolor: red;\r\n\t\tfont-size: 0.7em;\r\n\t\tmargin-left: 1em;\r\n\t}\r\n\t.bform input{\r\n\t\twidth: 50%;\r\n\t\theight: 30px;\r\n\t\tborder: none;\r\n\t\toutline: none;\r\n\t\tborder-radius: 10px;\r\n\t\tpadding-left: 2em;\r\n\t\tbackground-color: #f0f0f0;\r\n\t}\r\n\t.bbutton{\r\n\t\twidth: 20%;\r\n\t\theight: 40px;\r\n\t\tborder-radius: 24px;\r\n\t\tborder: none;\r\n\t\toutline: none;\r\n\t\tbackground-color: rgb(57,167,176);\r\n\t\tcolor: #fff;\r\n\t\tfont-size: 0.9em;\r\n\t\tcursor: pointer;\r\n\t}\r\n\t.small-box{\r\n\t\twidth: 30%;\r\n\t\theight: 100%;\r\n\t\tbackground: linear-gradient(135deg,rgb(57,167,176),rgb(56,183,145));\r\n\t\tposition: absolute;\r\n\t\ttop: 0;\r\n\t\tleft: 0;\r\n\t\ttransform: translateX(0%);\r\n\t\ttransition: all 1s;\r\n\t\tborder-top-left-radius: inherit;\r\n\t\tborder-bottom-left-radius: inherit;\r\n\t}\r\n\t.small-contain{\r\n\t\twidth: 100%;\r\n\t\theight: 100%;\r\n\t\tdisplay: flex;\r\n\t\tflex-direction: column;\r\n\t\tjustify-content: center;\r\n\t\talign-items: center;\r\n\t}\r\n\t.stitle{\r\n\t\tfont-size: 1.5em;\r\n\t\tfont-weight: bold;\r\n\t\tcolor: #fff;\r\n\t}\r\n\t.scontent{\r\n\t\tfont-size: 0.8em;\r\n\t\tcolor: #fff;\r\n\t\ttext-align: center;\r\n\t\tpadding: 2em 4em;\r\n\t\tline-height: 1.7em;\r\n\t}\r\n\t.sbutton{\r\n\t\twidth: 60%;\r\n\t\theight: 40px;\r\n\t\tborder-radius: 24px;\r\n\t\tborder: 1px solid #fff;\r\n\t\toutline: none;\r\n\t\tbackground-color: transparent;\r\n\t\tcolor: #fff;\r\n\t\tfont-size: 1em;\r\n\t\tcursor: pointer;\r\n\t\t\r\n\t}\r\n\t\r\n\t.big-box.active{\r\n\t\tleft: 0;\r\n\t\ttransition: all 0.5s;\r\n\t}\r\n\t.small-box.active{\r\n\t\tleft: 100%;\r\n\t\tborder-top-left-radius: 0;\r\n\t\tborder-bottom-left-radius: 0;\r\n\t\tborder-top-right-radius: inherit;\r\n\t\tborder-bottom-right-radius: inherit;\r\n\t\ttransform: translateX(-100%);\r\n\t\ttransition: all 1s;\r\n\t}\r\n    .captcha_zone {\r\n        display: flex;\r\n        align-items: center;\r\n    }\r\n\r\n    .captcha_button {\r\n        background-color: #007bff;\r\n        color: white;\r\n        padding: 8px 12px;\r\n        cursor: pointer;\r\n        margin-right: 10px;\r\n        border-radius: 4px;\r\n        user-select: none;\r\n    }\r\n\r\n    .captcha_button:hover {\r\n        background-color: #0056b3;\r\n    }\r\n\r\n    .captcha_input {\r\n        flex: 1;\r\n        padding: 8px;\r\n        border: 1px solid #ccc;\r\n        border-radius: 4px;\r\n    }\r\n</style>\r\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}